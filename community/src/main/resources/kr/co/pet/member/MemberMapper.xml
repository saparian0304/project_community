<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.pet.member.MemberMapper">
	<insert id = "insert" parameterType="kr.co.pet.member.MemberVO">
		insert into member( name, member_id, pwd, email, regdate, nickname, birthday, addr, gender )
		values ( #{name}, #{member_id}, md5(#{pwd}), #{email}, NOW(), #{nickname}, #{birthday}, #{addr}, #{gender})
	</insert>
	
	<select id="idCheck" parameterType="String" resultType="int">
		select count(member_id) from member where member_id = #{member_id}
	</select>
	
	<select id="nicknameCheck" parameterType="String" resultType="int">
		select count(nickname) from member where nickname = #{nickname}
	</select>
	
	<select id="emailCheck" parameterType="String" resultType="int">
		select count(*) from member where email = #{email}
	</select>
	
	<select id="loginCheck" parameterType="kr.co.pet.member.MemberVO" resultType="kr.co.pet.member.MemberVO">
		select * from member where member_id = '${member_id}' and pwd = md5('${pwd}')
	</select>
	
	<select id="findId" parameterType="kr.co.pet.member.MemberVO" resultType="kr.co.pet.member.MemberVO">
		select * from member where name = '${name}' and email = '${email}' 
	</select>
	
	<select id="findPwd" parameterType="kr.co.pet.member.MemberVO" resultType="kr.co.pet.member.MemberVO">
		select * from member where member_id = '${member_id}' and email = '${email}' 
	</select>
	
	<update id="updateTempPwd" parameterType="kr.co.pet.member.MemberVO" >
		update member SET pwd = md5(#{pwd}) where member_id = '${member_id}' and email = '${email}'
	</update>
	
	
	
</mapper>
